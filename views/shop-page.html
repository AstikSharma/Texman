<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="/stylesheets/global.css" type="text/css" rel="stylesheet" />
    <link href="/stylesheets/shop-page.css" type="text/css" rel="stylesheet" />
  </head>

  <body>
    <div id="background"></div>

    <!-- Nav Bar -->
    <div id="nav-bar">
      <div class="upper-part">
        <img class="logo" src="images/logo.png" alt="favicon" />

        <div class="center-part">
          <div class="search-bar">
            <i class="nf nf-seti-search"></i>
            <textarea rows="1" placeholder="search..."></textarea>
          </div>
          <div class="nav-links">
            <a href="/">Home</a>
            <a class="category-dropdown"
              >Categories <i class="nf nf-oct-chevron_down"></i>
            </a>
            <a>Linking Link</a>
          </div>
        </div>

        <div class="icon-part">
          <a class="nf nf-fa-user_circle"></a>
          <a class="nf nf-md-cart_outline"></a>
          <button
            class="nav-toggle nf nf-md-menu"
            role="button"
            onclick="navToggle()"
          ></button>
        </div>
      </div>

      <div class="sub-links">
        <a href="">Headphones</a>
        <a href="">Category B</a>
        <a href="">Category C</a>
        <a href="">Category D</a>
        <a href="">Category E</a>
        <a href="">Category F</a>
      </div>

      <div class="pop-part">
        <div class="pop-search-bar search-bar">
          <i class="nf nf-seti-search"></i>
          <textarea rows="1" placeholder="search..."></textarea>
        </div>
        <div class="pop-nav-links">
          <a href="/">Home</a>
          <a class="category-dropdown"
            >Categories <i class="nf nf-oct-chevron_down"></i
          ></a>
          <div class="pop-sub-links">
            <a href="/shop?category=headphones">Headphones</a>
            <a href="">Category B</a>
            <a href="">Category C</a>
            <a href="">Category D</a>
            <a href="">Category E</a>
            <a href="">Category F</a>
          </div>
          <a>Linking Link</a>
        </div>
      </div>
    </div>

    <!-- Main Home content begins -->
    <main>
      <!-- Product Grid -->
      <h1 id="category-heading">Category Heading</h1>
      <div id="product-grid">
       
          <!-- <div class="item">

            <div class="contentBox">
              <h3></h3>
              <h2 class="price"></h2>
              <h2 class="price"></h2>
              <a href="" class="buy">Buy Now</a>
            </div>
          </div> -->
        
      </div>
      <hr />
    </main>
    <footer>
      <div class="upper-triangle-shadow"></div>
      <div class="upper-triangle"></div>
      <div class="footer-content"></div>
    </footer>
    <!-- Back to Top -->
    <button
      id="back-to-top"
      class="nf nf-fa-chevron_up btn-darken"
      onclick="backToTop()"
    ></button>

<script>
      
async function fetchData() {
    try {
        const response = await fetch('/data');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();

        // Call a function to display the product grid
        displayProductGrid(data);
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}


function displayProductGrid(data) {
    const productGrid = document.getElementById('product-grid');

   
    data.forEach((product) => {
        const productDiv = document.createElement('div');
        productDiv.classList.add('item');

        
        const imgElement = document.createElement('img');
        imgElement.src = product.img_url;
        imgElement.alt = product.title;

        const titleElement = document.createElement('h3');
        titleElement.textContent = product.title;

        const priceElement = document.createElement('h2');
        priceElement.classList.add('price');
        priceElement.textContent = `Price: ${product.price}`; 

        const buyLinkElement = document.createElement('a');
        buyLinkElement.href = "/product/"+product._id;
        buyLinkElement.classList.add('buy');
        buyLinkElement.textContent = 'Buy Now';

        
        productDiv.appendChild(imgElement);
        productDiv.appendChild(titleElement);
        productDiv.appendChild(priceElement);
        productDiv.appendChild(buyLinkElement);

        
        productGrid.appendChild(productDiv);
    });
}


window.addEventListener('load', () => {
    fetchData();
});

    </script>
    
  </body>
</html>
<!-- <div class="item">
  <img src="/images/cat.png" alt="CAt" />
  <div class="contentBox">
    <h3>A very very very long product name</h3>
    <h2 class="price">$ 61.<small>98</small></h2>
    <a href="#" class="buy">Buy Now</a>
  </div>
</div> -->
